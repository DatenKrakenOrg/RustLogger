@startuml
title Docker Container Startup Sequence - RustLogger System

!define RUSTTAG #CE422B
!define ELASTICTAG #005571
!define NGINXTAG #009639
!define HAPROXYTAG #106DA9
!define KIBANATAG #F04E98
!define SETUPTAG #FFA500

skinparam activity {
  BackgroundColor White
  BorderColor Black
  FontColor Black
  FontSize 12
}

skinparam partition {
  BackgroundColor #F8F9FA
  BorderColor #6C757D
  FontStyle bold
}

start

fork 
    :log-gen<color:RUSTTAG>;

fork again
partition "Phase 1: Log Collection Infrastructure" #LIGHTBLUE {
  fork
    :container-log-collector-1<color:RUSTTAG>;
  fork again
    :container-log-collector-2<color:RUSTTAG>;
  fork again
    :container-log-collector-3<color:RUSTTAG>;
  end fork

:container-log-lb<color:NGINXTAG>;
}



partition "Phase 2: Elasticsearch Infrastructure" #LIGHTYELLOW {
  :elasticsetup<color:SETUPTAG>;

  fork
    :es01<color:ELASTICTAG>;
  fork again
    :es02<color:ELASTICTAG>;
  fork again
    :es03<color:ELASTICTAG>;
  fork again
    :es04<color:ELASTICTAG>;
  fork again
    :es05<color:ELASTICTAG>;
  end fork
 :elastic-lb<color:HAPROXYTAG>;
}

partition "Phase 3: API Services" #LIGHTCORAL {
    :log-forwarding-api-1<color:RUSTTAG>;
fork
  :log-forwarding-api-2<color:RUSTTAG>;
fork again
  :log-forwarding-api-3<color:RUSTTAG>;
end fork
  :log-forwarding-lb<color:NGINXTAG>;
}

end fork

:log-sender<color:RUSTTAG>;

:System Operational;
stop
@enduml
